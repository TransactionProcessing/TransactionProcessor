name: Sync Codacy Issues

on:
  workflow_dispatch:
    inputs:
      dry_run:
        description: "Run without creating or modifying GitHub issues"
        required: false
        default: false
        type: boolean
  push:
    branches:
      - main
      - master

jobs:
  sync-codacy:
    uses: TransactionProcessing/org-ci-workflows/.github/workflows/sync-codacy-issues.yml@main
    with:
      # Pass boolean to reusable workflow
      dry_run: ${{ github.event.inputs.dry_run == true }}
    secrets:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      CODACY_API_TOKEN: ${{ secrets.CODACY_API_TOKEN }}
